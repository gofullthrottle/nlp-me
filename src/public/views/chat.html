<link rel="stylesheet" href="./style/chatStyle.css">


<div id="chat" onmouseover="document.body.style.overflow='hidden';" onmouseout="document.body.style.overflow='auto';">

  <div id="header">
    <!--<h3>Chat!</h3>-->
    <h5>Choose which APIs to chat with...</h5>
  </div>

  <div id="selection-container">


    <div class="api-selection-container" id="aylien-selection-container">

      <div class="api-selection" id="aylien-selection">
        <img class="api-logo" src="images/aylien-icon.png">
        <span id="aylien-logo-text">AYLIEN</span>
        <div class="api-checkbox cb1">
            <input type="checkbox" id="cb1" ng-model="aylien.enabled">
            <label for="cb1"></label>
         </div>
        <span class="glyphicon glyphicon-chevron-down dropdown-toggle" ng-click="aylien.view = true" ng-hide="aylien.view"></span>
        <span class="glyphicon glyphicon-chevron-up dropdown-toggle" ng-click="aylien.view = false" ng-show="aylien.view"></span>
      </div>

    </div>


    <div class="api-selection-container" id="rosette-selection-container">

      <div class="api-selection" id="rosette-selection">
        <img class="api-logo" src="images/rosette-logo.png">
        <div class="api-checkbox cb2">
            <input type="checkbox" id="cb2" ng-model="rosette.enabled">
            <label for="cb2"></label>
         </div>
        <span class="glyphicon glyphicon-chevron-down dropdown-toggle" ng-click="rosette.view = true" ng-hide="rosette.view"></span>
        <span class="glyphicon glyphicon-chevron-up dropdown-toggle" ng-click="rosette.view = false" ng-show="rosette.view"></span>
      </div>

    </div>


    <div class="api-selection-container" id="indico-selection-container">

      <div class="api-selection" id="indico-selection">
        <img class="api-logo" src="images/indico-logo.png">
        <div class="api-checkbox cb3">
            <input type="checkbox" id="cb3" ng-model="indico.enabled">
            <label for="cb3"></label>
         </div>
        <span class="glyphicon glyphicon-chevron-down dropdown-toggle" ng-click="indico.view = true" ng-hide="indico.view"></span>
        <span class="glyphicon glyphicon-chevron-up dropdown-toggle" ng-click="indico.view = false" ng-show="indico.view"></span>
      </div>

    </div>


    <div class="api-selection-container" id="meaningcloud-selection-container">

      <div class="api-selection" id="meaningcloud-selection">
        <img class="api-logo" src="https://s3.amazonaws.com/leosimmons-nlp/meaningcloud-logo">
        <div class="api-checkbox cb4">
            <input type="checkbox" id="cb4" ng-model="meaningcloud.enabled">
            <label for="cb4"></label>
         </div>
        <span class="glyphicon glyphicon-chevron-down dropdown-toggle" ng-click="meaningcloud.view = true" ng-hide="meaningcloud.view"></span>
        <span class="glyphicon glyphicon-chevron-up dropdown-toggle" ng-click="meaningcloud.view = false" ng-show="meaningcloud.view"></span>
      </div>

    </div>


  </div>




  <div id="dropdown-container">

    <!--=========  AYLIEN DROPDOWN =========-->
    <div class="dropdown" id="aylien-dropdown" ng-show="aylien.view">
      <h3 class="dropdown-header">Analysis Options</h3>
      <ul class="api-types-list">
        <li>
          <span>Classify</span>
          <div class="api-checkbox cb1">
              <input type="checkbox" id="acb-classify" ng-model="aylien.types.classify">
              <label for="acb-classify"></label>
           </div>
        </li>
        <li>
          <span>Sentiment</span>
          <div class="api-checkbox cb1">
              <input type="checkbox" id="acb-sentiment" ng-model="aylien.types.sentiment">
              <label for="acb-sentiment"></label>
           </div>
        </li>
        <li>
          <span>Concepts</span>
          <div class="api-checkbox cb1">
              <input type="checkbox" id="acb-concepts" ng-model="aylien.types.concepts">
              <label for="acb-concepts"></label>
           </div>
        </li>
        <!--
        <li>
          <span>Entities</span>
          <div class="api-checkbox cb1">
              <input type="checkbox" id="acb-entities" ng-model="aylien.types.entities">
              <label for="acb-entities"></label>
           </div>
        </li>
        <li>
          <span>Summary</span>
          <div class="api-checkbox cb1">
              <input type="checkbox" id="acb-summary" ng-model="aylien.types.summary">
              <label for="acb-summary"></label>
           </div>
        </li>
        -->
        <li>
          <span>Hashtags</span>
          <div class="api-checkbox cb1">
              <input type="checkbox" id="acb-hashtags" ng-model="aylien.types.hashtags">
              <label for="acb-hashtags"></label>
           </div>
        </li>
      </ul>
    </div>

    <!--=========  ROSETTE DROPDOWN  =========-->
    <div class="dropdown" id="rosette-dropdown" ng-show="rosette.view">
      <h3 class="dropdown-header">Analysis Options</h3>
      <ul class="api-types-list">
        <li>
          <span>Categories</span>
          <div class="api-checkbox cb2">
              <input type="checkbox" id="rcb-categories" ng-model="rosette.types.categories">
              <label for="rcb-categories"></label>
           </div>
        </li>
        <li>
          <span>Sentiment</span>
          <div class="api-checkbox cb2">
              <input type="checkbox" id="rcb-sentiment" ng-model="rosette.types.sentiment">
              <label for="rcb-sentiment"></label>
           </div>
        </li>
        <li>
          <span>Relationships</span>
          <div class="api-checkbox cb2">
              <input type="checkbox" id="rcb-relationships" ng-model="rosette.types.relationships">
              <label for="rcb-relationships"></label>
           </div>
        </li>
        <li>
          <span>Entities</span>
          <div class="api-checkbox cb2">
              <input type="checkbox" id="rcb-entities" ng-model="rosette.types.entities">
              <label for="rcb-entities"></label>
           </div>
        </li>
      </ul>
    </div>

    <!--=========  INDICO DROPDOWN  =========-->
    <div class="dropdown" id="indico-dropdown" ng-show="indico.view">
      <h3 class="dropdown-header">Analysis Options</h3>
      <ul class="api-types-list">
        <li>
          <span tooltip-placement="top" tooltip-class="indico-tooltip" uib-tooltip="Text tags are similiar to categories. A confidence level is given for each tag given to your input. See the response in JSON format to see all 111 possible tags!" >Text Tags</span>
          <div class="api-checkbox cb3">
              <input type="checkbox" id="icb-texttags" ng-model="indico.types.texttags">
              <label for="icb-texttags"></label>
           </div>
        </li>
        <li>
          <span tooltip-placement="top" tooltip-class="indico-tooltip" uib-tooltip="Positive or negative input? This analysis will give a number between 0 and 1. Above 0.5 indicates positive sentiment, below 0.5 indicates negative sentiment." >Sentiment</span>
          <div class="api-checkbox cb3">
              <input type="checkbox" id="icb-sentiment" ng-model="indico.types.sentiment">
              <label for="icb-sentiment"></label>
           </div>
        </li>
        <li>
          <span tooltip-placement="top" tooltip-class="indico-tooltip" uib-tooltip="Extracts personality traits of yours from your input" >Personality</span>
          <div class="api-checkbox cb3">
              <input type="checkbox" id="icb-personality" ng-model="indico.types.personality">
              <label for="icb-personality"></label>
           </div>
        </li>
        <li>
          <span tooltip-placement="top" tooltip-class="indico-tooltip" uib-tooltip="Extracts the people referenced in your input." >People</span>
          <div class="api-checkbox cb3">
              <input type="checkbox" id="icb-people" ng-model="cindico.types.people">
              <label for="icb-people"></label>
           </div>
        </li>
        <li>
          <span tooltip-placement="top" tooltip-class="indico-tooltip" uib-tooltip="Will output a number between 0 and 1 that represents the likelihood that your input expresses a leaning to the 'liberal', 'green', 'conservative', and 'libertarian' political affiliations." >Political Analysis</span>
          <div class="api-checkbox cb3">
              <input type="checkbox" id="icb-political" ng-model="indico.types.political">
              <label for="icb-political"></label>
           </div>
        </li>
        <li>
          <span tooltip-placement="top" tooltip-class="indico-tooltip" uib-tooltip="Gives confidence levels for what your Myers Briggs Personality Type (MBTI) is." >Personas</span>
          <div class="api-checkbox cb3">
              <input type="checkbox" id="icb-personas" ng-model="indico.types.personas">
              <label for="icb-personas"></label>
           </div>
        </li>
        <li>
          <span tooltip-placement="top" tooltip-class="indico-tooltip" uib-tooltip="Predicts if your input express anger, joy, fear, surprise, or sadness." >Emotion</span>
          <div class="api-checkbox cb3">
              <input type="checkbox" id="icb-emotion" ng-model="indico.types.emotion">
              <label for="icb-emotion"></label>
           </div>
        </li>
      </ul>
    </div>


    <!--=========  MEANING CLOUD DROPDOWN  =========-->
    <div class="dropdown" id="meaningcloud-dropdown" ng-show="meaningcloud.view">
      <h3 class="dropdown-header">Analysis Options</h3>
      <ul class="api-types-list">
        <li>
          <span tooltip-placement="left" tooltip-class="meaningcloud-tooltip" uib-tooltip="Extracts the categories in your input." >Classification</span>
          <div class="api-checkbox cb4">
              <input type="checkbox" id="mccb-classification" ng-model="meaningcloud.types.classification">
              <label for="mccb-classification"></label>
           </div>
        </li>
        <li>
          <span tooltip-placement="left" tooltip-class="meaningcloud-tooltip" uib-tooltip="Detects the polarity, subjectivity, irony, and emotional agreement in your input.">Sentiment</span>
          <div class="api-checkbox cb4">
              <input type="checkbox" id="mccb-sentiment" ng-model="meaningcloud.types.sentiment">
              <label for="mccb-sentiment"></label>
           </div>
        </li>
        <li>
          <span tooltip-placement="left" tooltip-class="meaningcloud-tooltip" uib-tooltip="Extracts the topics in your input.">Topics</span>
          <div class="api-checkbox cb4">
              <input type="checkbox" id="mccb-topics" ng-model="meaningcloud.types.topics">
              <label for="mccb-topics"></label>
           </div>
        </li>
      </ul>
    </div>

  </div>





  <div id="convo-container" scroll-bottom="convo">


    <div  ng-repeat="message in convo track by $index">

      <img class="avatar" ng-if="message.who !== 'user'" ng-src="{{'images/' + message.who + '-icon.png'}}">


      <div class="message user" ng-if="message.who === 'user'">
        <p>Sup it's you!</p>
      </div>

      <!--=========  AYLIEN MESSAGE  =========-->
      <div class="message aylien" ng-if="message.who === 'aylien'" ng-show="message.view === 'json'">
        <b>Here are my analyses of your input in JSON format</b><span class="json-link"> - <a ng-click="message.view = 'pretty'">view in English</a></span>
        <div ng-repeat="(type, analysis) in message.analyses">
          <h5>{{type | cap}}</h5>
          <pre>{{analysis | json}}</pre>
        </div>
      </div>
      <div class="message aylien" ng-if="message.who === 'aylien'" ng-show="message.view === 'pretty'">

        <b>Hello! Here are my analyses of your input</b><span class="json-link"> - <a ng-click="message.view = 'json'">view in JSON</a></span>

        <div ng-if="message.analyses.classify">
          <h5>Classify</h5>
          <p>
            I'm
            <span ng-repeat="category in message.analyses.classify.categories track by $index">
              <span ng-if="$last">and</span>
              <strong>{{category.confidence | Perc}}%</strong>
              confident that
              <strong>{{category.label}}</strong>
              is a category
              <span class="comma-period" ng-if="!$last">,</span>
              <span class="comma-period" ng-if="$last">.</span>
            </span>
          </p>
        </div>

        <div ng-if="message.analyses.sentiment">
          <h5>Sentiment</h5>
          <p>
            I'm
            <strong>{{message.analyses.sentiment.subjectivity_confidence | Perc}}%</strong>
            confident that the subjectivity is
            <strong>{{message.analyses.sentiment.subjectivity}}</strong>
            and
            <strong>{{message.analyses.sentiment.polarity_confidence | Perc}}%</strong>
            confident that the polarity is
            <strong>{{message.analyses.sentiment.polarity}}</strong>
            <span class="comma-period">.</span>
          </p>
        </div>


        <div ng-if="message.analyses.concepts">
          <h5>Concepts</h5>
            <!--<p ng-if="only(message.analyses.concepts.concepts)">-->
            <p ng-if="keys(message.analyses.concepts.concepts).length === 1">
              The only concept I could find was
              <strong ng-repeat="(key, value) in message.analyses.concepts.concepts">
                <a ng-href="{{key}}" target="_blank">{{value.surfaceForms[0].string}}</a>
              </strong>
              <span class="comma-period">.</span>
            </p>
            <!--<p ng-show="!only(message.analyses.concepts.concepts)">-->
            <p ng-if="keys(message.analyses.concepts.concepts).length > 1">
              The concepts I found were
              <span ng-repeat="(key, value) in message.analyses.concepts.concepts">
                <span ng-if="$last">and</span>
                <strong>
                  <a ng-href="{{key}}" target="_blank">{{value.surfaceForms[0].string}}</a>
                </strong>
                <span class="comma-period" ng-if="!$last">,</span>
                <span class="comma-period" ng-if="$last">.</span>
              </span>
            </p>
        </div>


        <div ng-if="message.analyses.entities">
          <h5>Entities</h5>
            <p ng-if="only(message.analyses.concepts.concepts)">
              The only concept I could find was
              <strong ng-repeat="(key, value) in message.analyses.concepts.concepts">
                <a ng-href="{{key}}" target="_blank">{{value.surfaceForms[0].string}}</a>
              </strong>
              <span class="comma-period">.</span>
            </p>
            <p ng-if="!only(message.analyses.concepts.concepts)">
              The concepts I found were
              <span ng-repeat="(key, value) in message.analyses.concepts.concepts">
                <strong>
                  <a ng-href="{{key}}" target="_blank">{{value.surfaceForms[0].string}}</a>
                </strong>
                <span class="comma-period" ng-if="!$last">,</span>
                <span class="comma-period" ng-if="$last">.</span>
              </span>
            </p>
        </div>

        <div ng-if="message.analyses.hashtags">
          <h5>Hashtags</h5>
            <p ng-if="message.analyses.hashtags.hashtags.length === 1">
              The only hashtag I could find was
              <strong>
                {{message.analyses.hashtags.hashtags[0]}}
              </strong>
              <span class="comma-period">.</span>
            </p>
            <p ng-if="message.analyses.hashtags.hashtags.length > 1">
              The hashtags I found were
              <span ng-repeat="hashtag in message.analyses.hashtags.hashtags">
                <span ng-if="$last">and</span>
                <strong>
                  {{hashtag}}
                </strong>
                <span class="comma-period" ng-if="!$last">,</span>
                <span class="comma-period" ng-if="$last">.</span>
              </span>
            </p>
        </div>

        <div ng-if="message.errors">
          <h5>Errors</h5>
            <p ng-if="message.errors.length === 1">
              Error retrieving the <strong>{{message.errors[0]}}</strong> analysis.
            </p>
            <p ng-if="message.errors.length > 1">
              Error retriveing the
              <span ng-repeat="error in message.errors">
                <span ng-if="$last">and</span>
                <strong>{{error}}</strong>
                <span class="comma-period" ng-if="!$last">,</span>
              </span>
              analyses.
            </p>
        </div>

      </div>

      <!--=========  ROSETTE MESSAGE  =========-->
      <div class="message rosette" ng-if="message.who === 'rosette'">
        <p>Sup from rosette</p>
      </div>

      <!--=========  INDICO MESSAGE  =========-->
      <div class="message indico" ng-if="message.who === 'indico'">
        <p>yooo it's indico</p>
      </div>

      <!--=========  MEANING CLOUD MESSAGE  =========-->
      <div class="message meaningcloud" ng-if="message.who === 'meaningcloud'">
        <p>meaningcloud! I suck!</p>
      </div>


    </div>


  </div>




  <form>
    <div id="input-container">
      <input type="text" ng-model="text"/>
      <button type="submit" ng-click="add()">Send</button>
    </div>
  </form>
</div>
